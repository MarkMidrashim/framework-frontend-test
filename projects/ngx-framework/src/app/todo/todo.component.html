<div class="row">
  <div class="col-12">
    <div class="card mb-4">
      <div class="card-header pb-0">
        <h6 [hidden]="!loading">Hist√≥rico de registros</h6>
        <ngx-skeleton-loader
          [hidden]="loading"
          count="1"
          [theme]="{ width: '20em', 'border-radius': '40', height: '40px' }"
        ></ngx-skeleton-loader>
      </div>
      <div class="card-body px-0 pt-0 pb-2">
        <div class="table-responsive px-4">
          <table
            *ngIf="todo$ | async as todos; else loadingSkeleton"
            class="table table-hover align-items-center justify-content-center mb-0"
          >
            <thead>
              <tr>
                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Title</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let todo of todos">
                <td><span class="text-sm font-weight-bold ellipses" [ngClass]="{'text-striped': todo?.completed}">{{ todo?.title }}</span></td>
                <td class="text-end align-middle">
                  <button *ngIf="!todo?.completed" class="btn btn-link text-secondary mb-0" (click)="update(todo.id)">
                    <span style="color: #3085d6">
                      <i class="fas fa-pencil-alt text-xs"></i>
                    </span>
                  </button>
                  <button class="btn btn-link text-secondary mb-0" (click)="delete(todo)">
                    <span style="color: #d33">
                      <i class="fas fa-trash text-xs"></i>
                    </span>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="card-footer">
        <div class="col-12 text-end">
          <button
            mat-button
            [hidden]="!loading"
            [routerLink]="'create'"
            class="btn bg-gradient-success btn-block mb-3"
          >
            Cadastrar
          </button>
          <ngx-skeleton-loader
            [hidden]="loading"
            count="1"
            [theme]="{ width: '10em', 'border-radius': '40', height: '40px' }"
          ></ngx-skeleton-loader>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #loadingSkeleton>
  <div class="row">
    <div class="col-11">
      <ngx-skeleton-loader
        [hidden]="loading"
        count="10"
        [theme]="{ 'border-radius': '40', height: '40px' }"
      ></ngx-skeleton-loader>
    </div>
    <div class="col-1">
      <ngx-skeleton-loader
        [hidden]="loading"
        count="10"
        [theme]="{ 'border-radius': '40', height: '40px' }"
      ></ngx-skeleton-loader>
    </div>
  </div>
</ng-template>
